<!DOCTYPE html>
<html lang="pt-br">
<head>
    <link rel="icon" href="√≠cone.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Background</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="background-video-container">
        <video autoplay loop muted>
            <source src="Space.mp4" type="video/mp4">
            Seu navegador n√£o suporta o elemento de v√≠deo.
        </video>
    </div>
    
    <div id="content-container">
        <div id="clock"></div>
        <div id="date"></div>
        <div id="temperature-container">
            <div id="temperature"></div>
            <div id="weather-icon"></div> <!-- √çcone do clima ao lado da temperatura -->
        </div>
    </div>

    <script>
        // Fun√ß√£o para iniciar a m√∫sica
        function iniciarMusica() {
            var audio = new Audio('louvores.webm');
            audio.play();
        }

        // Fun√ß√£o para verificar a hora e iniciar a m√∫sica √†s 22h
        function verificarHora() {
            var agora = new Date();
            var horas = agora.getHours();
            var minutos = agora.getMinutes();

            if (horas === 22 && !musicaIniciada) {
                iniciarMusica();
                musicaIniciada = true;
            } else if (horas !== 22) {
                musicaIniciada = false;
            }

            if (horas === 23 && minutos === 0) {
                window.open('https://j2plus.netlify.app/back/sleep.html');
            } else if (horas === 23 && minutos === 30) {
                tocarAlarme();
            }
        }

        function tocarAlarme() {
            var alarmeAudio = new Audio('Dormir.wav');
            alarmeAudio.play();
        }

        var musicaIniciada = false;
        setInterval(verificarHora, 60000);

        // Reconhecimento de Voz
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'pt-BR';
        recognition.interimResults = false;

        let reconhecimentoAtivo = false;

        // Fun√ß√£o para iniciar ou parar o reconhecimento de voz
        function toggleReconhecimento() {
            if (reconhecimentoAtivo) {
                recognition.stop();
                reconhecimentoAtivo = false;
                console.log('Reconhecimento de voz parado.');
            } else {
                reconhecimentoAtivo = true;
                recognition.start();  // Inicia diretamente o reconhecimento
                console.log('Reconhecimento de voz iniciado.');
            }
        }

        // Configura√ß√µes de eventos do reconhecimento
        recognition.onresult = (event) => {
            const comando = event.results[0][0].transcript.toLowerCase();
            console.log('Comando reconhecido:', comando);

            if (comando.includes('ler')) {
                abrirSite('https://j2plus.netlify.app/works/ler.html');
            } else if (comando.includes('trade')) {
                abrirAlgunsSites('https://br.investing.com/', 'https://br.tradingview.com/chart/wJjwLtXA/?symbol=BMFBOVESPA%3AIBOV', 'https://www.youtube.com/results?search_query=coringa+trade', 'https://www.youtube.com/results?search_query=laatus+reuni%C3%A3o+matinal');
            } else if (comando.includes('assistir')) {
                abrirSite('https://j2plus.netlify.app/streamings/yt/joca/index.html');
            } else if (comando.includes('previs√£o do tempo')) {
                obterPrevisaoDoTempo();
            } else {
                console.log('Comando n√£o reconhecido.');
            }
        };

        recognition.onend = () => {
            if (reconhecimentoAtivo) {
                recognition.start();  // Reinicia automaticamente o reconhecimento ap√≥s o t√©rmino
            }
        };

        recognition.onerror = (event) => {
            console.error('Erro no reconhecimento de voz:', event.error);
        };

        // Fun√ß√µes para abrir sites

        function abrirAlgunsSites(url1, url2, url3, url4) {
            window.open(url1, '_blank');
            window.open(url2, '_blank');
            window.open(url3, '_blank');
            window.open(url4, '_blank');
            console.log(`Abrindo os sites: ${url1}, ${url2}, ${url3} e ${url4}`);
        }

        // Fun√ß√£o para obter a previs√£o do tempo e falar
        function obterPrevisaoDoTempo() {
            const chaveAPI = 'bd2aa057407fb66d24136dab032d5bb8'; // Substitua com sua chave de API
            const cidade = 'S√£o Paulo'; // Defina a cidade que voc√™ deseja
            const url = `https://api.openweathermap.org/data/2.5/weather?q=${cidade}&appid=${chaveAPI}&lang=pt&units=metric`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const temperatura = data.main.temp;
                    const descricao = data.weather[0].description;
                    const fala = `A previs√£o do tempo em ${cidade} √© de ${descricao} com temperatura de ${temperatura} graus Celsius.`;
                    console.log(fala);
                    falar(fala);
                })
                .catch(error => {
                    console.error('Erro ao obter previs√£o do tempo:', error);
                });
        }

        // Fun√ß√£o para fazer o navegador falar
        function falar(texto) {
            const synth = window.speechSynthesis;
            const utterance = new SpeechSynthesisUtterance(texto);
            utterance.lang = 'pt-BR';
            synth.speak(utterance);
        }

        // Adiciona o evento de clique para ativar/desativar o reconhecimento
        document.getElementById('content-container').addEventListener('click', toggleReconhecimento);

        document.addEventListener("DOMContentLoaded", function () {
    setInterval(updateClock, 1000);  // Atualiza o rel√≥gio a cada segundo
    updateClock();  // Atualiza o rel√≥gio imediatamente
    updateDate();   // Atualiza a data imediatamente
    getTemperature();  // Obt√©m a temperatura inicialmente
});

function updateClock() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const seconds = now.getSeconds().toString().padStart(2, '0');
    document.getElementById('clock').textContent = `${hours}:${minutes}:${seconds}`;
}

function updateDate() {
    const now = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    let formattedDate = now.toLocaleDateString('pt-br', options);

    // Remove "-feira" dos dias da semana
    formattedDate = formattedDate.replace(/segunda-feira|ter√ßa-feira|quarta-feira|quinta-feira|sexta-feira/gi, function (match) {
        return match.replace('-feira', '');
    });

    document.getElementById('date').textContent = formattedDate;
}

const apiKey = 'bd2aa057407fb66d24136dab032d5bb8'; // Substitua com a sua chave de API do OpenWeatherMap
const city = 'Jacupiranga'; // Substitua com o nome da cidade desejada

const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}`;

async function getTemperature() {
    try {
        const response = await fetch(apiUrl);

        if (!response.ok) {
            throw new Error(`Erro ao obter a temperatura: ${response.status}`);
        }

        const data = await response.json();
        const temperaturaKelvin = data.main.temp;
        const temperaturaCelsius = (temperaturaKelvin - 273.15).toFixed(2); // Convertendo para Celsius e fixando duas casas decimais

        // Definir o texto da temperatura
        document.getElementById('temperature').textContent = `Temperatura: ${temperaturaCelsius}¬∞C`;

        // Obter a condi√ß√£o do tempo
        const weatherCondition = data.weather[0].main;

        // Definir o √≠cone de clima com base na condi√ß√£o
        let weatherIcon = '';
        switch (weatherCondition) {
            case 'Clear':
                weatherIcon = '‚òÄÔ∏è'; // √çcone de sol
                break;
            case 'Clouds':
                weatherIcon = '‚òÅÔ∏è'; // √çcone de nuvem
                break;
            case 'Snow':
                weatherIcon = '‚ùÑÔ∏è'; // √çcone de neve
                break;
            case 'Rain':
                weatherIcon = 'üåßÔ∏è'; // √çcone de chuva
                break;
            default:
                weatherIcon = 'üå•Ô∏è'; // √çcone de tempo parcialmente nublado
                break;
        }

        // Exibir o √≠cone de clima
        document.getElementById('weather-icon').textContent = weatherIcon;

    } catch (error) {
        console.error(`Erro ao obter a temperatura: ${error.message}`);
    }
}

// Define intervalos para atualizar a data e o rel√≥gio a cada minuto
setInterval(updateDate, 1000);
setInterval(getTemperature, 1000);

    </script>
</body>
</html>
